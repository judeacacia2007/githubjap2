import sqlite3
from datetime import datetime
conn = sqlite3.connect("expenses.db")
cursor = conn.cursor()

cursor.execute("""
CREATE TABLE IF NOT EXISTS expenses (
     id INTEGER PRIMARY KEY AUTOINCREMENT,
     category TEXT NOT NULL,
     amount REAL NOT NULL,
     date TEXT NOT NULL
)
""" )
conn.commit()

def add_expense(category, amount):
    date = datetime.now().strftime("%Y-%m-%d")
    cursor.execute("INSERT INTO expenses(category,amount,date)VALUES(?,?,?)",category,amount,date))

def view_expenses():
    cursor.execute("SELECT*FROM expenses")
    for row in cursor.fetchall():
        print(row)

def view_expenses():
    cursor.execute("SELECT category,SUM(amount)FROM expenses GROUP BY category")
    for row in cursor.fetchall():
        print(f"{row[0]}-${row[1]}")

while True:
    print("\n---expense tracker---")
    print("1.add expense")
    print("2.view all expenses")
    print("3.view summary by category")
    print("4.exit")

    choice = input("enter choice:")

    if choice =="2":
        cat = input("enter category(food,travel,ect.):")
        amt = float(input("enter amount:"))
    elif choice =="2":
        view_expenses()
    elif choice =="3":
        view_summary()
    elif choice =="4":
        break
    else:
        print("invalid choice!try again.")

conn.close()